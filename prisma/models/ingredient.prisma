model Ingredient {
    idIngredient Int    @id @default(autoincrement()) @db.Integer
    name         String @unique @db.VarChar(50)

    recipeIngredient RecipeIngredient[]

    @@schema("recipe")
}

// MÃ¡ smysl dÄ›lat i nÄ›jakÃ© skupiny u ingrediencÃ­? Jako je napÅ™Ã­klad maso, koÅ™enÃ­ nebo nÄ›jakÃ© jinÃ© skupiny kterÃ© tÄ› nenÃ¡padnou?

// ChatGPT Å™ekl:
// Ano, dÃ¡vÃ¡ to velkÃ½ smysl â€“ rozdÄ›lit ingredience do skupin mÅ¯Å¾e vÃ½raznÄ› zjednoduÅ¡it prÃ¡ci s recepty, plÃ¡novaÄem i filtrovÃ¡nÃ­m v administraci nebo na webu.

// âœ… VÃ½hody ingredienÄnÃ­ch skupin:
// FiltrovÃ¡nÃ­ a tÅ™Ã­dÄ›nÃ­:

// UÅ¾ivatel mÅ¯Å¾e rychle najÃ­t napÅ™. jen â€koÅ™enÃ­â€œ, â€zeleninuâ€œ, â€masoâ€œ, atd.

// VÃ½Å¾ivovÃ© souhrny:

// MÅ¯Å¾eÅ¡ dopoÄÃ­tat napÅ™. celkovÃ© kalorie jen pro maso, mlÃ©ÄnÃ© vÃ½robky apod.

// Seznamy na nÃ¡kup:

// SeskupÃ­Å¡ poloÅ¾ky podle sekcÃ­ v obchodÄ› (napÅ™. â€ovoce/zeleninaâ€œ, â€masoâ€œ, â€peÄivoâ€œ...).

// SezÃ³nnost nebo dostupnost:

// U skupiny â€ÄerstvÃ¡ zeleninaâ€œ mÅ¯Å¾eÅ¡ tÅ™eba filtrovat podle sezÃ³ny.

// ğŸ”– PÅ™Ã­klady skupin:
// Skupina	PÅ™Ã­klady ingrediencÃ­
// Maso	kuÅ™ecÃ­ prsa, vepÅ™ovÃ¡ krkovice
// Zelenina	mrkev, okurka, paprika
// Ovoce	jablka, banÃ¡ny, jahody
// KoÅ™enÃ­	pepÅ™, sÅ¯l, paprika mletÃ¡
// MlÃ©ÄnÃ© vÃ½robky	mlÃ©ko, mÃ¡slo, sÃ½r
// PeÄivo	houska, chlÃ©b
// LuÅ¡tÄ›niny	ÄoÄka, fazole
// TÄ›stoviny / obiloviny	rÃ½Å¾e, tÄ›stoviny, bulgur
// Sladidla	cukr, med
// Olej / tuky	olej, sÃ¡dlo
// Konzervy	tuÅˆÃ¡k v konzervÄ›, rajÄata v plechovce

// ğŸ§© DatabÃ¡zovÄ›:
// prisma
// ZkopÃ­rovat
// Upravit
// model Ingredient {
//   id         Int               @id @default(autoincrement())
//   name       String
//   groupId    Int?
//   group      IngredientGroup?  @relation(fields: [groupId], references: [id])
//   // dalÅ¡Ã­ pole...
// }

// model IngredientGroup {
//   id        Int           @id @default(autoincrement())
//   name      String        @unique
//   ingredients Ingredient[]
// }
// âœï¸ DoporuÄenÃ­:
// UrÄitÄ› zaÄni s nÄ›kolika zÃ¡kladnÃ­mi skupinami (5â€“10), kterÃ© dÃ¡vajÃ­ smysl pro filtrovÃ¡nÃ­ nebo nÃ¡kup.

// MÅ¯Å¾eÅ¡ pozdÄ›ji pÅ™idat moÅ¾nost â€bez skupinyâ€œ nebo speciÃ¡lnÃ­ skupinu â€OstatnÃ­â€œ.

// ChceÅ¡, abych ti navrhl Prisma modely, pÅ™Ã­padnÄ› seeding nÄ›kolika zÃ¡kladnÃ­ch skupin a ingrediencÃ­?

// Å˜ekl/a jsi:
// Ano
// ChatGPT Å™ekl:
// SkvÄ›le! Tady mÃ¡Å¡ nÃ¡vrh na Prisma modely pro ingredience a jejich skupiny + zÃ¡kladnÃ­ seeding skript s nÄ›kolika typickÃ½mi skupinami a ingrediencemi:

// Prisma modely
// prisma
// ZkopÃ­rovat
// Upravit
// model IngredientGroup {
//   id           Int           @id @default(autoincrement())
//   name         String        @unique
//   ingredients  Ingredient[]
// }

// model Ingredient {
//   id           Int           @id @default(autoincrement())
//   name         String        @unique
//   groupId      Int?
//   group        IngredientGroup? @relation(fields: [groupId], references: [id])
// }
// Seeding skript (prisma/seed.ts)
// ts
// ZkopÃ­rovat
// Upravit
// import { PrismaClient } from '@prisma/client';

// const prisma = new PrismaClient();

// async function main() {
//   const groups = [
//     { name: 'Maso' },
//     { name: 'Zelenina' },
//     { name: 'Ovoce' },
//     { name: 'KoÅ™enÃ­' },
//     { name: 'MlÃ©ÄnÃ© vÃ½robky' },
//     { name: 'PeÄivo' },
//     { name: 'TÄ›stoviny / obiloviny' },
//     { name: 'Olej / tuky' },
//     { name: 'LuÅ¡tÄ›niny' },
//     { name: 'Sladidla' },
//     { name: 'Konzervy' },
//   ];

//   const createdGroups = await Promise.all(
//     groups.map((group) => prisma.ingredientGroup.create({ data: group }))
//   );

//   const groupMap = Object.fromEntries(createdGroups.map(g => [g.name, g.id]));

//   await prisma.ingredient.createMany({
//     data: [
//       { name: 'KuÅ™ecÃ­ prsa', groupId: groupMap['Maso'] },
//       { name: 'HovÄ›zÃ­ maso', groupId: groupMap['Maso'] },
//       { name: 'Mrkev', groupId: groupMap['Zelenina'] },
//       { name: 'Paprika', groupId: groupMap['Zelenina'] },
//       { name: 'Jablko', groupId: groupMap['Ovoce'] },
//       { name: 'SÅ¯l', groupId: groupMap['KoÅ™enÃ­'] },
//       { name: 'PepÅ™', groupId: groupMap['KoÅ™enÃ­'] },
//       { name: 'MlÃ©ko', groupId: groupMap['MlÃ©ÄnÃ© vÃ½robky'] },
//       { name: 'ChlÃ©b', groupId: groupMap['PeÄivo'] },
//       { name: 'RÃ½Å¾e', groupId: groupMap['TÄ›stoviny / obiloviny'] },
//       { name: 'SluneÄnicovÃ½ olej', groupId: groupMap['Olej / tuky'] },
//       { name: 'ÄŒoÄka', groupId: groupMap['LuÅ¡tÄ›niny'] },
//       { name: 'Cukr', groupId: groupMap['Sladidla'] },
//       { name: 'TuÅˆÃ¡k v konzervÄ›', groupId: groupMap['Konzervy'] },
//       { name: 'VajÃ­Äko' }, // bez skupiny
//     ],
//   });
// }

// main()
//   .then(() => {
//     console.log('Seed hotov');
//   })
//   .catch((e) => {
//     console.error(e);
//     process.exit(1);
//   })
//   .finally(async () => {
//     await prisma.$disconnect();
//   });
// âœ… Tipy
// Ve formulÃ¡Å™i pro sprÃ¡vu ingrediencÃ­ mÅ¯Å¾eÅ¡ nabÃ­dnout vÃ½bÄ›r skupiny jako select, ale zÃ¡roveÅˆ umoÅ¾nit â€bez skupinyâ€œ (null).

// PÅ™idÃ¡nÃ­m order nebo color do skupin mÅ¯Å¾eÅ¡ v budoucnu ladit i vzhled nebo poÅ™adÃ­.

// ChceÅ¡ jeÅ¡tÄ› k tomu i typy pro frontend nebo administraÄnÃ­ UI nÃ¡vrh?

// Å˜ekl/a jsi:
// MÃ¡ smysl i seskupovat ingredience napÅ™Ã­klad podle toho, kdyÅ¾ zadÃ¡m cibule, malÃ¡ cibule , velkÃ¡ cibule a podobnÄ›? Abych vÄ›dÄ›l, Å¾e to patÅ™Ã­ k sobÄ›?

// ChatGPT Å™ekl:
// Ano, to dÃ¡vÃ¡ velkÃ½ smysl â€“ jde o takzvanÃ© variace (varianty) ingrediencÃ­, kterÃ© se mohou liÅ¡it velikostÃ­, druhem nebo pÅ™esnostÃ­ pojmenovÃ¡nÃ­, ale logicky patÅ™Ã­ k sobÄ›. PomÅ¯Å¾e ti to zejmÃ©na v tÄ›chto pÅ™Ã­padech:

// DÅ¯vody, proÄ to zavÃ©st:
// SjednocenÃ­ pÅ™i plÃ¡novÃ¡nÃ­ nebo nÃ¡kupech:

// â€malÃ¡ cibuleâ€œ a â€velkÃ¡ cibuleâ€œ spadajÃ­ pod â€cibuleâ€œ â†’ mÅ¯Å¾eÅ¡ je seskupit, seÄÃ­st mnoÅ¾stvÃ­, pÅ™evÃ©st na gramy apod.

// Flexibilita pÅ™i zadÃ¡vÃ¡nÃ­ receptu:

// UÅ¾ivatel mÅ¯Å¾e napsat â€1 malÃ¡ cibuleâ€œ a systÃ©m bude vÄ›dÄ›t, Å¾e to je varianta â€cibuleâ€œ.

// LepÅ¡Ã­ filtrovÃ¡nÃ­, Å™azenÃ­ a reporty:

// NapÅ™Ã­klad v nÃ¡kupnÃ­m seznamu bude jen â€cibuleâ€œ s celkovÃ½m mnoÅ¾stvÃ­m (bez duplikacÃ­ typu â€malÃ¡ cibuleâ€œ, â€cibuleâ€œ).

// Jak to modelovat v databÃ¡zi
// MÅ¯Å¾eÅ¡ zavÃ©st novÃ½ model IngredientGrouping nebo propojit ingredience mezi sebou pomocÃ­ ParentIngredientId:

// Varianta A: Self-reference
// prisma
// ZkopÃ­rovat
// Upravit
// model Ingredient {
//   id           Int           @id @default(autoincrement())
//   name         String        @unique
//   groupId      Int?
//   group        IngredientGroup? @relation(fields: [groupId], references: [id])

//   parentId     Int?
//   parent       Ingredient? @relation("IngredientVariants", fields: [parentId], references: [id])
//   variants     Ingredient[] @relation("IngredientVariants")
// }
// parentId Å™Ã­kÃ¡, Å¾e tÅ™eba â€malÃ¡ cibuleâ€œ mÃ¡ jako rodiÄe â€cibuliâ€œ.

// Pokud parentId je null, jednÃ¡ se o hlavnÃ­ ingredienci.

// Varianta B: ZvlÃ¡Å¡tnÃ­ tabulka pro vazby
// Pokud bys chtÄ›l vÃ­ce vztahÅ¯ (napÅ™. Å¾e jedna ingredience mÅ¯Å¾e bÃ½t souÄÃ¡stÃ­ vÃ­ce skupin), mÅ¯Å¾eÅ¡ mÃ­sto parentId pouÅ¾Ã­t novou tabulku:

// prisma
// ZkopÃ­rovat
// Upravit
// model IngredientGroupMapping {
//   id           Int           @id @default(autoincrement())
//   parentId     Int
//   childId      Int
//   parent       Ingredient     @relation("ParentIngredient", fields: [parentId], references: [id])
//   child        Ingredient     @relation("ChildIngredient", fields: [childId], references: [id])
// }
// Ale ve vÄ›tÅ¡inÄ› pÅ™Ã­padÅ¯ ti staÄÃ­ prvnÃ­ varianta (self-reference).

// PÅ™Ã­klad struktury
// id	name	parentId
// 1	cibule	null
// 2	malÃ¡ cibule	1
// 3	velkÃ¡ cibule	1
// 4	ÄervenÃ¡ cibule	1
// 5	rajÄe	null
// 6	cherry rajÄe	5

// ChceÅ¡, abych ti k tomu rovnou napsal i Prisma model a seed dat?

// Å˜ekl/a jsi:
// Ano
// ChatGPT Å™ekl:
// Ingredient Variants Model

// 1
// 2
// 3
// 4
// 5
// 6
// 7
// 8
// 9
// model Ingredient {
//   id        Int          @id @default(autoincrement())
//   name      String       @unique

//   parentId  Int?         // Odkazuje na hlavnÃ­ ingredienci (napÅ™. "cibule")
//   parent    Ingredient?  @relation("IngredientVariants", fields: [parentId], references: [id])
//   variants  Ingredient[] @relation("IngredientVariants")
// }

// Pro seskupovÃ¡nÃ­ podobnÃ½ch ingrediencÃ­ jako â€cibuleâ€œ, â€malÃ¡ cibuleâ€œ, â€velkÃ¡ cibuleâ€œ mÃ¡ smysl pouÅ¾Ã­t relaÄnÃ­ vazbu na â€hlavnÃ­â€œ ingredienci. To ti umoÅ¾nÃ­ jednoduÅ¡e urÄit, Å¾e vÅ¡echny varianty patÅ™Ã­ k sobÄ›. Tento model pak mÅ¯Å¾eÅ¡ pouÅ¾Ã­t pro konsolidaci dat, plÃ¡novÃ¡nÃ­ nebo nÃ¡hrady pÅ™i vaÅ™enÃ­.

// MÅ¯Å¾eme pÅ™Ã­padnÄ› pÅ™idat typ varianty (napÅ™. velikost, druh), pokud chceÅ¡ varianty rozliÅ¡ovat podrobnÄ›ji. ChceÅ¡ i to?

// Å˜ekl/a jsi:
// MÃ¡m v plÃ¡nu mÃ­t i tabulku, kde budu mÃ­t nÃ¡hrady potravin, ale jen pÅ™i plÃ¡novaÄ 

// ChatGPT Å™ekl:
// To dÃ¡vÃ¡ velkÃ½ smysl â€“ oddÄ›lit nÃ¡hrady potravin do samostatnÃ© tabulky, kterÃ¡ se pouÅ¾ije specificky pro plÃ¡novaÄ. DÃ­ky tomu:

// nezatÃ­Å¾Ã­Å¡ model ingrediencÃ­ zbyteÄnÃ½mi daty, kterÃ¡ se pouÅ¾Ã­vajÃ­ jen pÅ™i plÃ¡novÃ¡nÃ­,

// mÅ¯Å¾eÅ¡ mÃ­t rÅ¯znÃ© typy nÃ¡hrad â€“ napÅ™. nutriÄnÄ› podobnÃ©, cenovÄ› dostupnÄ›jÅ¡Ã­, nebo jen preferovanÃ© uÅ¾ivatelem,

// mÅ¯Å¾eÅ¡ nÃ¡hrady filtrovat kontextovÄ› â€“ napÅ™. podle alergiÃ­, preferencÃ­, dostupnosti.

// PÅ™Ã­klad nÃ¡vrhu:
// prisma
// ZkopÃ­rovat
// Upravit
// model Ingredient {
//   IdIngredient Int @id @default(autoincrement())
//   Name         String
//   GroupId      Int?
//   Group        IngredientGroup? @relation(fields: [GroupId], references: [IdIngredientGroup])

//   // Varianty
//   BaseIngredientId Int?
//   BaseIngredient   Ingredient? @relation("VariantOf", fields: [BaseIngredientId], references: [IdIngredient])
//   Variants         Ingredient[] @relation("VariantOf")

//   // NÃ¡hrady
//   SubstitutesFor   IngredientSubstitute[] @relation("SubstituteTarget")
//   SubstituteWith   IngredientSubstitute[] @relation("SubstituteSource")
// }

// model IngredientGroup {
//   IdIngredientGroup Int @id @default(autoincrement())
//   Name              String
//   Ingredients       Ingredient[]
// }

// model IngredientSubstitute {
//   Id                 Int @id @default(autoincrement())
//   TargetIngredientId Int
//   SourceIngredientId Int
//   Note               String? // napÅ™. "vhodnÃ¡ nÃ¡hrada pÅ™i vaÅ™enÃ­", "cenovÄ› vÃ½hodnÄ›jÅ¡Ã­"
//   OnlyForPlanner     Boolean @default(true) // nÃ¡hrada pouze pÅ™i plÃ¡novÃ¡nÃ­

//   TargetIngredient Ingredient @relation("SubstituteTarget", fields: [TargetIngredientId], references: [IdIngredient])
//   SourceIngredient Ingredient @relation("SubstituteSource", fields: [SourceIngredientId], references: [IdIngredient])
// }
// ChceÅ¡ to upravit pro nÄ›jakÃ© specifickÃ© potÅ™eby (napÅ™. typ nÃ¡hrady, prioritu, uÅ¾ivatelskÃ© preference apod.)?

// TODO: Ingredience a jednotky bych mohl dÅ¡lat podle igourmet. MajÃ­ to podobnÄ›, jak byhch to chtÄ›l jÃ¡  https://www.igurmet.cz/recepty/salaty/salat-s-jahodami-6704/
