model Unit {
    IdUnit      Int    @id @default(autoincrement()) @db.Integer
    Name        String @unique @db.VarChar(10) // napÅ™. "g"
    DisplayName String @db.VarChar(10) // napÅ™. "gramy"

    Recipes RecipeIngredient[]
}

// MÃ¡m si nÄ›jak upravit tabulku pro jednotky, kdyÅ¾ chci mÃ­t moÅ¾nost zadat napÅ™Ã­klad strÅ¾ek, strouÅ¾kÅ¯ a abych vÄ›dÄ›l, Å¾e jednotky patÅ™Ã­ k sobÄ›? Do budoucna chci udÄ›lat tÃ½dennÃ­ plÃ¡noavaÄ a kdyÅ¾ budu vÄ›dÄ›t, Å¾e tuto jednotky patÅ™Ã­ k sobÄ›, tak to mÅ¯Å¾u pÅ™evÄ›st na jednu spoleÄnou jednotku. ALe zase musÃ­m vÄ›dÄ›t, kdy pak urÄitpou jednotku pouÅ¾Ã­t. MusÃ­m vÄ›dÄ›t, pro jakÃ½ poÄet urÄitou jednotku pouÅ¾Ã­t

// model Unit {
//     IdUnit      Int    @id @default(autoincrement()) @db.Integer
//     Name        String @unique @db.VarChar(10) // napÅ™. "g"
//     DisplayName String @db.VarChar(10) // napÅ™. "gramy"

//     Recipes RecipeIngredient[]
// }

// ChatGPT Å™ekl:
// Ano, pokud plÃ¡nujeÅ¡ funkce jako pÅ™evody mezi jednotkami, plÃ¡novÃ¡nÃ­ jÃ­del na tÃ½den, Å¡kÃ¡lovÃ¡nÃ­ receptÅ¯ atd., bude potÅ™eba tvÅ¯j model Unit upravit. MÃ­t jen Name a DisplayName nestaÄÃ­, pokud chceÅ¡:

// vÄ›dÄ›t, kterÃ© jednotky spolu souvisÃ­ (napÅ™. strouÅ¾ek vs. strouÅ¾kÅ¯),

// provÃ¡dÄ›t pÅ™evody mezi nimi (napÅ™. 3 strouÅ¾ky = 15 g),

// automaticky zvolit sprÃ¡vnou jednotku podle mnoÅ¾stvÃ­ (napÅ™. â€1 strouÅ¾ekâ€œ vs. â€3 strouÅ¾kyâ€œ vs. â€15 gâ€œ).

// ğŸ”§ DoporuÄenÃ¡ Ãºprava modelu Unit
// Zde je nÃ¡vrh rozÅ¡Ã­Å™enÃ©ho modelu:

// prisma
// ZkopÃ­rovat
// Upravit
// model Unit {
//   IdUnit        Int       @id @default(autoincrement())
//   Name          String    @unique              // napÅ™. "g"
//   DisplayName   String                         // napÅ™. "gramy"
//   Group         String?                        // napÅ™. "Äesnek", "hmotnost", "objem"
//   IsBase        Boolean   @default(false)      // napÅ™. true pro "g" ve skupinÄ› hmotnosti
//   ConversionToBase Float?                      // napÅ™. 5 pro "strouÅ¾ek" => 1 strouÅ¾ek = 5g

//   Recipes       RecipeIngredient[]
// }
// ğŸ§  Jak to funguje
// Group: UrÄuje, kterÃ© jednotky spolu souvisejÃ­. NapÅ™. "Äesnek" mÅ¯Å¾e mÃ­t "strouÅ¾ek" a "g".

// IsBase: OznaÄÃ­Å¡ jednu jednotku jako zÃ¡kladnÃ­ v rÃ¡mci skupiny (napÅ™. â€gâ€œ pro hmotnost, â€mlâ€œ pro objem).

// ConversionToBase: ÄŒÃ­selnÃ½ pÅ™evod na zÃ¡kladnÃ­ jednotku, pokud je to moÅ¾nÃ© (napÅ™. 1 strouÅ¾ek = 5g).

// âœ… PÅ™Ã­klad:
// Name	DisplayName	Group	IsBase	ConversionToBase
// g	gramy	hmotnost	true	null
// kg	kilogramy	hmotnost	false	1000
// strouÅ¾ek	strouÅ¾kÅ¯	Äesnek	false	5
// ml	mililitry	objem	true	null

// ğŸ—“ï¸ VÃ½hody pro tÃ½dennÃ­ plÃ¡novaÄ:
// MÅ¯Å¾eÅ¡ poÄÃ­tat celkovÃ© mnoÅ¾stvÃ­ surovin ve spoleÄnÃ© jednotce.

// PÅ™i vÃ½pisu nÃ¡kupnÃ­ho seznamu mÅ¯Å¾eÅ¡ automaticky pÅ™evÃ¡dÄ›t napÅ™. 15 strouÅ¾kÅ¯ Äesneku na 75 g.

// MÅ¯Å¾eÅ¡ rozhodovat, kdy zobrazit "strouÅ¾ky" a kdy "g" podle mnoÅ¾stvÃ­ â€“ napÅ™. pokud je pod 4, pouÅ¾ijeÅ¡ strouÅ¾ky, jinak g.

// ğŸ§© MoÅ¾nÃ© rozÅ¡Ã­Å™enÃ­ do budoucna:
// Pokud chceÅ¡ bÃ½t extrÃ©mnÄ› pÅ™esnÃ½, mÅ¯Å¾eÅ¡ mÃ­t i zvlÃ¡Å¡tnÃ­ tabulku UnitConversion, kterÃ¡ definuje pÅ™evody mezi jednotkami nejen ÄÃ­selnÄ›, ale i kontextovÄ› (napÅ™. typ suroviny).

// ChceÅ¡, abych ti pÅ™idal i typ UnitGroup jako samostatnÃ½ model? Nebo ti staÄÃ­ Group: String jako vÃ½Å¡e?

// Å˜ekl/a jsi:
// Nebylo by vhodnÃ© mÃ¡t group ve zlÃ¡Å¡tnÃ­ tabulce a nÄ›jakou pÅ™evodnÃ­ tabulkou to spojit?

// ChatGPT Å™ekl:
// Ano, rozdÄ›lit jednotky do skupin pÅ™es zvlÃ¡Å¡tnÃ­ tabulku a vytvoÅ™it pÅ™evodnÃ­ tabulku je architektonicky ÄistÄ›jÅ¡Ã­, flexibilnÄ›jÅ¡Ã­ a pÅ™ipravenÃ© na budoucÃ­ rÅ¯st.

// ğŸ§± NÃ¡vrh struktury s tabulkami UnitGroup, Unit, a UnitConversion
// ### UnitGroup â€“ napÅ™. â€hmotnostâ€œ, â€objemâ€œ, â€Äesnekâ€œ:
// prisma
// ZkopÃ­rovat
// Upravit
// model UnitGroup {
//   id        Int     @id @default(autoincrement())
//   name      String  @unique    // napÅ™. "hmotnost", "objem", "Äesnek"
//   units     Unit[]
// }
// ### Unit â€“ jednotky jako â€gâ€œ, â€mlâ€œ, â€strouÅ¾ekâ€œ:
// prisma
// ZkopÃ­rovat
// Upravit
// model Unit {
//   id           Int         @id @default(autoincrement())
//   name         String      @unique       // napÅ™. "g", "ml", "strouÅ¾ek"
//   displayName  String                     // napÅ™. "gramy", "mililitry"
//   groupId      Int
//   group        UnitGroup   @relation(fields: [groupId], references: [id])

//   fromConversions UnitConversion[] @relation("FromUnit")
//   toConversions   UnitConversion[] @relation("ToUnit")

//   recipes      RecipeIngredient[]
// }
// ### UnitConversion â€“ pÅ™evody mezi jednotkami ve skupinÄ›:
// prisma
// ZkopÃ­rovat
// Upravit
// model UnitConversion {
//   id         Int    @id @default(autoincrement())
//   fromUnit   Unit   @relation("FromUnit", fields: [fromUnitId], references: [id])
//   fromUnitId Int

//   toUnit     Unit   @relation("ToUnit", fields: [toUnitId], references: [id])
//   toUnitId   Int

//   multiplier Float  // napÅ™. 1 kg = 1000 g => multiplier = 1000
// }
// âœ… VÃ½hody tohoto Å™eÅ¡enÃ­
// VÃ½hoda	VysvÄ›tlenÃ­
// âœ… Flexibilita	MÅ¯Å¾eÅ¡ pÅ™idat libovolnÃ© konverze, napÅ™. 1 strouÅ¾ek Äesneku = 5 g, bez zÃ¡sahu do Unit.
// âœ… ÄŒistÃ¡ data	Jednotky jsou navÃ¡zÃ¡ny na logickÃ© skupiny. VÃ­Å¡, co patÅ™Ã­ k Äemu.
// âœ… NezÃ¡vislost	MÅ¯Å¾eÅ¡ mÃ­t vÃ­c pÅ™evodÅ¯ (napÅ™. pro rÅ¯znÃ© suroviny), napÅ™. 1 hrnek mouky = 120g, ale 1 hrnek rÃ½Å¾e = 200g.
// âœ… MoÅ¾nost rozÅ¡Ã­Å™enÃ­	Do UnitConversion mÅ¯Å¾eÅ¡ pÅ™idat i ingredientId, pokud chceÅ¡ konverze zÃ¡vislÃ© na surovinÄ›.

// ğŸ§  PÅ™Ã­klad zÃ¡znamu v UnitConversion
// fromUnit	toUnit	multiplier
// "kg"	"g"	1000
// "strouÅ¾ek"	"g"	5
// "lÅ¾Ã­ce"	"ml"	15

// â“ChceÅ¡ vÃ­ce: pÅ™idat napÅ™. smÄ›rovost (obousmÄ›rnÃ½ pÅ™evod), poznÃ¡mku, nebo konverzi zÃ¡vislou na surovinÄ›?
// RÃ¡d ti s tÃ­m pomÅ¯Å¾u, jen dej vÄ›dÄ›t, jak detailnÃ­ to chceÅ¡.

// Å˜ekl/a jsi:
// MÅ¯Å¾u mÃ­t tÅ™eba jen skupinu strouÅ¾ek a tam to spojit pod strouÅ¾ek a strouÅ¾ky. Nemo napÅ™iklad skupinu hmotnost a tam mÃ­t g, kg, dkg, atd?

// ChatGPT Å™ekl:
// Ano, pÅ™esnÄ› tak â€“ takovÃ© rozdÄ›lenÃ­ do skupin jako â€strouÅ¾ekâ€œ nebo â€hmotnostâ€œ dÃ¡vÃ¡ smysl a je to sprÃ¡vnÄ›. Zde je vysvÄ›tlenÃ­ obou pÅ™Ã­padÅ¯:

// ğŸ§„ 1. Skupina â€strouÅ¾ekâ€œ (pro neÄÃ­selnÃ© jednotky typu kusÅ¯)
// PouÅ¾Ã­vÃ¡ se napÅ™. pro Äesnek:

// Group: strouÅ¾ek

// Jednotky:

// strouÅ¾ek

// strouÅ¾ky

// ks

// pÅ™Ã­padnÄ› hlaviÄka, pokud chceÅ¡ i tuto granularitu

// ProÄ to dÃ¡vÃ¡ smysl?

// MÅ¯Å¾eÅ¡ si nastavit pÅ™evody (napÅ™. 1 hlaviÄka = 10 strouÅ¾kÅ¯).

// MÅ¯Å¾eÅ¡ sjednotit vÃ½poÄty pro nÃ¡kupnÃ­ seznamy nebo tÃ½dennÃ­ plÃ¡novaÄ.

// UÅ¾ivatelsky je vÃ½stup ÄitelnÄ›jÅ¡Ã­ (napÅ™. â€3 strouÅ¾kyâ€œ mÃ­sto â€3 ks Äesnekuâ€œ).

// âš–ï¸ 2. Skupina â€hmotnostâ€œ
// Zde budou jednotky jako:

// g

// kg

// dkg

// mg

// VÃ½hody:

// MoÅ¾nost pÅ™esnÃ½ch pÅ™evodÅ¯ pomocÃ­ UnitConversion.

// MÅ¯Å¾eÅ¡ pÅ™evÃ¡dÄ›t napÅ™. 2 kg + 300 g na 2.3 kg nebo 2300 g.

// ğŸ¯ Jak to pak pouÅ¾Ã­t?
// NapÅ™Ã­klad pÅ™i vÃ½poÄtu:

// NajdeÅ¡ vÅ¡echny jednotky ve stejnÃ© skupinÄ› (napÅ™. â€hmotnostâ€œ).

// PomocÃ­ UnitConversion pÅ™evedeÅ¡ vÅ¡e na jednu zÃ¡kladnÃ­ jednotku (napÅ™. g).

// PoÄÃ­tÃ¡Å¡, sÄÃ­tÃ¡Å¡, tÅ™Ã­dÃ­Å¡ podle toho.

// ğŸ’¡ ShrnutÃ­
// PÅ™Ã­klad skupiny	Jednotky ve skupinÄ›	DÃ¡vÃ¡ smysl?
// hmotnost	g, kg, dkg, mg	âœ… Ano
// objem	ml, l, ÄajovÃ¡ lÅ¾iÄka	âœ… Ano
// kusy (Äesnek)	strouÅ¾ek, strouÅ¾ky, ks	âœ… Ano
// jednotky vejce	vejce, ks	âœ… Ano (s konverzÃ­)

// Pokud chceÅ¡, mÅ¯Å¾u ti na zÃ¡kladÄ› toho pÅ™ipravit konkrÃ©tnÃ­ modely nebo ukÃ¡zku seed dat s pÅ™evody.

// Å˜ekl/a jsi:
// Ano, chci

// ChatGPT Å™ekl:
// Unit Group Model

// OdpovÄ›dÄ›t mÃ­sto plochy v chatu
// Super, pÅ™epsal jsem ti modely tak, aby podporovaly skupiny jednotek a pÅ™evody mezi nimi:

// UnitGroup definuje skupiny (napÅ™. hmotnost, kusy, strouÅ¾ky).

// Unit patÅ™Ã­ do skupiny a mÅ¯Å¾e bÃ½t v pÅ™evodnÃ­ relaci.

// UnitConversion definuje pÅ™evod mezi jednotkami pomocÃ­ koeficientu.

// Zachoval jsem vztah s RecipeIngredient.

// Pokud chceÅ¡, mÅ¯Å¾eme doplnit i pravidla pouÅ¾itÃ­ (napÅ™. kdy pouÅ¾Ã­t "strouÅ¾ky" mÃ­sto "strouÅ¾ek") pomocÃ­ dalÅ¡Ã­ho pole, nebo logiky. ChceÅ¡ pÅ™idat i takovÃ© upÅ™esnÄ›nÃ­?

// Prisma schema - modely pro jednotky, skupiny a pÅ™evody

// model UnitGroup {
//   id            Int     @id @default(autoincrement())
//   name          String  @unique @db.VarChar(50) // napÅ™. "hmotnost", "strouÅ¾ek"
//   baseUnitId    Int?    // odkaz na zÃ¡kladnÃ­ jednotku ve skupinÄ› (napÅ™. "g" pro hmotnost)

//   units         Unit[]
//   baseUnit      Unit?   @relation("BaseUnit", fields: [baseUnitId], references: [id])
// }

// model Unit {
//   id            Int     @id @default(autoincrement())
//   name          String  @unique @db.VarChar(10)   // napÅ™. "g"
//   displayName   String  @db.VarChar(20)           // napÅ™. "gramy"
//   groupId       Int

//   group         UnitGroup @relation(fields: [groupId], references: [id])
//   conversionsFrom UnitConversion[] @relation("FromUnit")
//   conversionsTo   UnitConversion[] @relation("ToUnit")

//   recipes       RecipeIngredient[]
// }

// model UnitConversion {
//   id         Int  @id @default(autoincrement())
//   fromUnitId Int
//   toUnitId   Int
//   factor     Float   // PÅ™evodnÃ­ koeficient (napÅ™. 1 kg = 1000 g -> factor = 1000)

//   fromUnit   Unit @relation("FromUnit", fields: [fromUnitId], references: [id])
//   toUnit     Unit @relation("ToUnit", fields: [toUnitId], references: [id])
// }

// model RecipeIngredient {
//   id        Int    @id @default(autoincrement())
//   quantity  Float
//   unitId    Int

//   unit      Unit   @relation(fields: [unitId], references: [id])
// }

// Co kdyÅ¾ nÄ›jakÃ© jednotky nejsou zaÅ™adit do Å¾Ã¡dnÃ© skupiny? NapadajÃ­ mÄ› napÅ™Ã­klad kusy

// ChatGPT Å™ekl:
// SkvÄ›lÃ¡ otÃ¡zka â€“ pÅ™esnÄ› tohle je potÅ™eba dopÅ™edu promyslet. U jednotek jako â€kusâ€œ, â€balenÃ­â€œ, â€plechovkaâ€œ apod. mÅ¯Å¾e bÃ½t skupinovÃ¡ struktura mÃ©nÄ› zÅ™ejmÃ¡. Tady jsou moÅ¾nosti, jak to oÅ¡etÅ™it:

// âœ… Varianta 1: NepovinnÃ¡ skupina (groupId mÅ¯Å¾e bÃ½t null)
// UpravÃ­Å¡ Unit model takto:

// prisma
// ZkopÃ­rovat
// Upravit
// model Unit {
//   id               Int         @id @default(autoincrement())
//   name             String      @unique
//   displayName      String
//   pluralName       String?
//   conversionToBase Float?
//   isBase           Boolean     @default(false)
//   groupId          Int?
//   group            UnitGroup?  @relation(fields: [groupId], references: [id])
// }
// DÃ­ky tomu:

// Jednotka mÅ¯Å¾e, ale nemusÃ­ patÅ™it do skupiny.

// NapÅ™. kus, balenÃ­, krabiÄka budou mÃ­t groupId = null.

// âœ… Varianta 2: SpeciÃ¡lnÃ­ skupina â€Bez skupinyâ€œ
// VytvoÅ™Ã­Å¡ v UnitGroup jednu speciÃ¡lnÃ­ skupinu s nÃ¡zvem napÅ™. "OstatnÃ­" nebo "Bez skupiny".

// VÅ¡echny nezaÅ™aditelnÃ© jednotky dÃ¡Å¡ sem.

// VÃ½hody:

// MÅ¯Å¾eÅ¡ vÅ¡echny jednotky filtrovat/Å™adit dle skupiny, aniÅ¾ bys Å™eÅ¡il null.

// NevÃ½hody:

// Je to trochu umÄ›lÃ© â€“ technicky sice nejsou ve skupinÄ›, ale databÃ¡ze si to bude myslet.

// ğŸ”„ Kdy zvolit kterou?
// KritÃ©rium	groupId: null	Skupina â€OstatnÃ­â€œ
// ChceÅ¡ mÃ­t databÃ¡zovÄ› ÄistÃ½ model	âœ… Ano	âŒ Ne
// ChceÅ¡ jednoduÅ¡Å¡Ã­ dotazy a tÅ™Ã­dÄ›nÃ­	âŒ Ne	âœ… Ano
// MÃ¡Å¡ hodnÄ› nezaÅ™aditelnÃ½ch jednotek	âœ… Ano	âœ… Ano

// âœï¸ DoporuÄenÃ­
// Pokud budeÅ¡ skupiny hodnÄ› pouÅ¾Ã­vat v UI a filtrovat podle nich (napÅ™. vÃ½bÄ›r pÅ™evoditelnÃ© jednotky), doporuÄuji mÃ­t groupId nepovinnÃ© (null) a v UI si jednotky bez skupiny zobrazit pod â€OstatnÃ­â€œ. Tak zÃ­skÃ¡Å¡ flexibilitu i Äitelnost.
