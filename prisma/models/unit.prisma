model Unit {
    idUnit      Int    @id @default(autoincrement()) @db.Integer
    name        String @unique @db.VarChar(10)
    idUnitGroup Int?   @db.Integer

    unitGroup        UnitGroup?         @relation("GroupUnits", fields: [idUnitGroup], references: [idUnitGroup])
    baseUnitOf       UnitGroup?         @relation("BaseUnit")
    fromConversion   UnitConversion[]   @relation("FromUnitConversion")
    toConversion     UnitConversion[]   @relation("ToUnitConversion")
    recipeIngredient RecipeIngredient[]
}

// Jak by se daly do tabulky vloÅ¾it nutriÄnÃ­ hodnoty potravin kterÃ© by se pak prepocetly pro danÃ© mnoÅ¾stvÃ­ v receptu?

// ChatGPT Å™ekl:
// SkvÄ›lÃ¡ otÃ¡zka! NutriÄnÃ­ hodnoty potravin se bÄ›Å¾nÄ› uklÃ¡dajÃ­ na 100 g nebo 100 ml, a pÅ™i vÃ½poÄtu hodnoty v receptu se pak jednoduÅ¡e pÅ™epoÄÃ­tajÃ­ podle konkrÃ©tnÃ­ho mnoÅ¾stvÃ­ a jednotky pouÅ¾itÃ­.

// NÃ­Å¾e najdeÅ¡ nÃ¡vrh tabulky a princip vÃ½poÄtu.

// NÃ¡vrh tabulky pro nutriÄnÃ­ hodnoty
// prisma
// ZkopÃ­rovat
// Upravit
// model Ingredient {
//   IdIngredient Int @id @default(autoincrement())
//   Name         String
//   // ... dalÅ¡Ã­ pole

//   NutritionalValues NutritionalValue?
// }

// model NutritionalValue {
//   Id                  Int @id @default(autoincrement())
//   IngredientId        Int @unique
//   CaloriesPer100g     Float // kcal
//   ProteinPer100g      Float // g
//   CarbsPer100g        Float // g
//   FatPer100g          Float // g
//   FiberPer100g        Float // g

//   Ingredient Ingredient @relation(fields: [IngredientId], references: [IdIngredient])
// }
// VÃ½poÄet pro konkrÃ©tnÃ­ mnoÅ¾stvÃ­ v receptu
// PÅ™edpoklad: hodnoty jsou na 100 g nebo 100 ml. V receptech mÃ¡Å¡ mnoÅ¾stvÃ­ napÅ™. 250 g.

// PÅ™Ã­klad vÃ½poÄtu v kÃ³du:
// ts
// ZkopÃ­rovat
// Upravit
// function calculateNutrition(valuePer100: number, amount: number) {
//   return (valuePer100 * amount) / 100;
// }

// // Pokud mÃ¡Å¡ napÅ™Ã­klad 250g kuÅ™ete:
// const calories = calculateNutrition(165, 250); // napÅ™. 165 kcal / 100g â†’ vÃ½stup: 412.5 kcal
// Co je potÅ™eba zajistit:
// Jednotky receptu by mÄ›ly bÃ½t konvertibilnÃ­ na hmotnost nebo objem â€“ ideÃ¡lnÄ› mÃ­t pÅ™evodnÃ­ tabulku napÅ™.:

// 1 lÅ¾Ã­ce oleje = 13 g

// 1 strouÅ¾ek Äesneku â‰ˆ 5 g

// Pokud to nejde jednoduÅ¡e, mÅ¯Å¾eÅ¡:

// u kaÅ¾dÃ© ingredience uchovÃ¡vat prÅ¯mÄ›rnou vÃ¡hu kusu nebo vÃ¡hu na 1 jednotku,

// napÅ™. gramsPerUnit: 5 (pro â€strouÅ¾ekâ€œ Äesneku).

// ChceÅ¡ pomoci i s nÃ¡vrhem pÅ™evodnÃ­ logiky jednotek na gramy/ml?
// NapÅ™Ã­klad aby se automaticky pÅ™epoÄÃ­tala jednotka â€strouÅ¾ekâ€œ na gramy pro vÃ½poÄet nutriÄnÃ­ch hodnot?

// Å˜ekl/a jsi:
// Ano
// ChatGPT Å™ekl:
// Super! Tady je nÃ¡vrh, jak vytvoÅ™it pÅ™evodnÃ­ logiku jednotek na hmotnost nebo objem pro sprÃ¡vnÃ½ vÃ½poÄet nutriÄnÃ­ch hodnot:

// 1. DatovÃ½ model â€“ pÅ™evod jednotek na gramy/ml
// prisma
// ZkopÃ­rovat
// Upravit
// model UnitConversion {
//   IdConversion Int @id @default(autoincrement())
//   UnitId       Int
//   IngredientId Int? // volitelnÃ© â€“ nÄ›kterÃ© pÅ™evody zÃ¡visÃ­ na konkrÃ©tnÃ­ ingredienci
//   GramsPerUnit Float? // napÅ™. 1 strouÅ¾ek Äesneku = 5 g
//   MlPerUnit    Float? // napÅ™. 1 lÅ¾Ã­ce oleje = 13 ml

//   Unit       Unit       @relation(fields: [UnitId], references: [IdUnit])
//   Ingredient Ingredient? @relation(fields: [IngredientId], references: [IdIngredient])
// }
// 2. Logika pÅ™evodu v kÃ³du (pseudo-TS)
// ts
// ZkopÃ­rovat
// Upravit
// function convertToGrams(amount: number, unit: string, ingredientId?: number): number | null {
//   const conversion = findConversion(unit, ingredientId); // z DB

//   if (!conversion) return null;

//   if (conversion.gramsPerUnit) {
//     return amount * conversion.gramsPerUnit;
//   }

//   // PÅ™Ã­padnÄ› pokud mÃ¡Å¡ ml a danÃ¡ ingredience mÃ¡ hustotu, mÅ¯Å¾eÅ¡ pÅ™evÃ©st ml â†’ g
//   return null;
// }
// 3. PÅ™Ã­klady v databÃ¡zi:
// Jednotka	Ingredience	GramsPerUnit
// strouÅ¾ek	Äesnek	5
// lÅ¾Ã­ce	olivovÃ½ olej	13
// ks	vejce (M)	60

// 4. VolitelnÃ© zlepÅ¡enÃ­:
// PÅ™idej pole Density (g/ml) pro pÅ™epoÄet ml â†’ g.

// UmoÅ¾ni zadat DefaultConversion pro danou jednotku, pokud nenÃ­ specifickÃ¡ pro ingredienci.

// 5. VÃ½poÄet nutriÄnÃ­ch hodnot pro recept
// Po pÅ™epoÄtu mnoÅ¾stvÃ­ do gramÅ¯ (napÅ™. 37 g Äesneku) pouÅ¾ijeÅ¡:

// ts
// ZkopÃ­rovat
// Upravit
// const calories = (ingredient.CaloriesPer100g * 37) / 100;
// ChceÅ¡, abych ti to pomohl rovnou zakomponovat do Prisma schÃ©matu a tÅ™eba i seed dat?

// Å˜ekl/a jsi:
// Ano
// ChatGPT Å™ekl:
// JasnÄ›, tady mÃ¡Å¡ kompletnÃ­ nÃ¡vrh Prisma modelÅ¯ a zÃ¡kladnÃ­ seed data, aby ses mohl rovnou pustit do prÃ¡ce.

// 1. UpravenÃ© Prisma modely
// prisma
// ZkopÃ­rovat
// Upravit
// model Unit {
//   IdUnit      Int     @id @default(autoincrement()) @db.Integer
//   Name        String  @unique @db.VarChar(10) // napÅ™. "g"
//   DisplayName String  @db.VarChar(50)         // napÅ™. "gramy"
//   GroupId     Int?    // FK na skupinu jednotek, mÅ¯Å¾e bÃ½t null (napÅ™. kusy)

//   Group       UnitGroup? @relation(fields: [GroupId], references: [IdGroup])
//   Conversions UnitConversion[]
//   Recipes     RecipeIngredient[]
// }

// model UnitGroup {
//   IdGroup   Int    @id @default(autoincrement())
//   Name      String @unique @db.VarChar(50)  // napÅ™. "Hmotnost", "Objem", "PoÄet kusÅ¯"
//   Units     Unit[]
// }

// model Ingredient {
//   IdIngredient   Int     @id @default(autoincrement())
//   Name           String  @unique
//   CaloriesPer100 Float?  // kcal na 100g
//   ProteinPer100  Float?  // g na 100g
//   FatPer100      Float?
//   CarbPer100     Float?

//   Conversions    UnitConversion[]
// }

// model UnitConversion {
//   IdConversion Int     @id @default(autoincrement())
//   UnitId       Int
//   IngredientId Int?    // volitelnÃ©, pokud zÃ¡visÃ­ na ingredienci
//   GramsPerUnit Float?  // napÅ™. 1 strouÅ¾ek Äesneku = 5g
//   MlPerUnit    Float?  // pro objemovÃ© jednotky, pokud je tÅ™eba

//   Unit       Unit       @relation(fields: [UnitId], references: [IdUnit])
//   Ingredient Ingredient? @relation(fields: [IngredientId], references: [IdIngredient])
// }
// 2. UkÃ¡zkovÃ¡ seed data (JS/TS)
// ts
// ZkopÃ­rovat
// Upravit
// import { PrismaClient } from "@prisma/client";
// const prisma = new PrismaClient();

// async function main() {
//   // Skupiny jednotek
//   const weightGroup = await prisma.unitGroup.upsert({
//     where: { Name: "Hmotnost" },
//     update: {},
//     create: { Name: "Hmotnost" },
//   });

//   const pieceGroup = await prisma.unitGroup.upsert({
//     where: { Name: "PoÄet kusÅ¯" },
//     update: {},
//     create: { Name: "PoÄet kusÅ¯" },
//   });

//   // Jednotky
//   const gram = await prisma.unit.upsert({
//     where: { Name: "g" },
//     update: {},
//     create: { Name: "g", DisplayName: "gramy", GroupId: weightGroup.IdGroup },
//   });

//   const piece = await prisma.unit.upsert({
//     where: { Name: "ks" },
//     update: {},
//     create: { Name: "ks", DisplayName: "kusy", GroupId: pieceGroup.IdGroup },
//   });

//   const clove = await prisma.unit.upsert({
//     where: { Name: "strouÅ¾ek" },
//     update: {},
//     create: { Name: "strouÅ¾ek", DisplayName: "strouÅ¾ek", GroupId: pieceGroup.IdGroup },
//   });

//   // Ingredience
//   const garlic = await prisma.ingredient.upsert({
//     where: { Name: "ÄŒesnek" },
//     update: {},
//     create: {
//       Name: "ÄŒesnek",
//       CaloriesPer100: 149,
//       ProteinPer100: 6.36,
//       FatPer100: 0.5,
//       CarbPer100: 33.06,
//     },
//   });

//   // PÅ™evody jednotek
//   await prisma.unitConversion.upsert({
//     where: {
//       UnitId_IngredientId: {
//         UnitId: clove.IdUnit,
//         IngredientId: garlic.IdIngredient,
//       },
//     },
//     update: {},
//     create: {
//       UnitId: clove.IdUnit,
//       IngredientId: garlic.IdIngredient,
//       GramsPerUnit: 5,
//     },
//   });
// }

// main()
//   .catch((e) => {
//     console.error(e);
//   })
//   .finally(async () => {
//     await prisma.$disconnect();
//   });
// 3. Jak to funguje
// UnitGroup drÅ¾Ã­ logickÃ© seskupenÃ­ jednotek (hmotnost, kusy, objem)

// Unit mÅ¯Å¾e patÅ™it do skupiny, ale nemusÃ­ (GroupId nullable)

// Ingredient mÃ¡ nutriÄnÃ­ info na 100g

// UnitConversion uklÃ¡dÃ¡, kolik gramÅ¯ (nebo ml) je jedna jednotka pro danou ingredienci (nebo obecnÄ›, pokud IngredientId je null)

// DÃ­ky tomu mÅ¯Å¾eÅ¡ snadno pÅ™epoÄÃ­tat mnoÅ¾stvÃ­ z libovolnÃ© jednotky na gramy a spoÄÃ­tat nutriÄnÃ­ hodnoty

// Pokud chceÅ¡, mÅ¯Å¾u ti pomoct i s funkcemi na pÅ™epoÄet v kÃ³du a integraci do receptÅ¯. ChceÅ¡?

// Å˜ekl/a jsi:
// To vypadÃ¡, Å¾e to bude spousta vÃ½poÄtu pro vÅ¡echny  ingredience3
// ChatGPT Å™ekl:
// Jo, mÅ¯Å¾e to bÃ½t docela nÃ¡roÄnÃ©, pokud budeÅ¡ poÄÃ­tat nutriÄnÃ­ hodnoty a pÅ™evody pro hodnÄ› ingrediencÃ­ a receptÅ¯ v reÃ¡lnÃ©m Äase.

// Ale je pÃ¡r moÅ¾nostÃ­, jak to optimalizovat:

// PÅ™edpoÄÃ­tat agregovanÃ© hodnoty
// PÅ™i vytvoÅ™enÃ­ nebo ÃºpravÄ› receptu si spoÄÃ­tat nutriÄnÃ­ hodnoty dopÅ™edu (napÅ™. celkovÃ¡ energie, bÃ­lkoviny, tuky, sacharidy na celÃ½ recept nebo na jednu porci) a uloÅ¾it je do databÃ¡ze.
// Pak jen pÅ™i zobrazovÃ¡nÃ­ receptu ÄteÅ¡ tyto pÅ™edpoÄÃ­tanÃ© hodnoty mÃ­sto sloÅ¾itÃ½ch realtime vÃ½poÄtÅ¯.

// Cache / memoizace
// Pokud vÃ½poÄet musÃ­ bÃ½t dynamickÃ½ (napÅ™. kdyÅ¾ uÅ¾ivatel mÄ›nÃ­ mnoÅ¾stvÃ­ ingrediencÃ­), tak mÅ¯Å¾eÅ¡ vÃ½poÄty cacheovat v pamÄ›ti, aby se pÅ™i rychlÃ©m opakovÃ¡nÃ­ nemusel poÄÃ­tat znovu.

// Optimalizace vÃ½poÄtÅ¯
// VÃ½poÄty dÄ›lÃ¡Å¡ jen pro poloÅ¾ky, kterÃ© se zmÄ›nily. Nebo si mÅ¯Å¾eÅ¡ rozdÄ›lit vÃ½poÄty do menÅ¡Ã­ch krokÅ¯ a

// Å˜ekl/a jsi:
// Jak mÃ¡m v plÃ¡novaÄi pÅ™evÃ©st jednotky,.kdyÅ¾ v jednom receptu nÄ›kdo zÃ¡da brambory napÅ™Ã­klad v musel a v jinÃ©m v gramech nebo miligramech? Budou mÃ¡ to nejen tabulky dostaÄujÃ­cÃ­?
// ChatGPT Å™ekl:
// TÃ©ma pÅ™evodu jednotek v plÃ¡novaÄi (kdyÅ¾ napÅ™. v jednom receptu jsou brambory v kusech, v jinÃ©m v gramech) je trochu sloÅ¾itÄ›jÅ¡Ã­ a opravdu tabulky s jednotkami a skupinami jsou zÃ¡klad, ale nestaÄÃ­ to ÃºplnÄ› samo o sobÄ›.

// Co bys mÄ›l mÃ­t a Å™eÅ¡it:
// StandardnÃ­ zÃ¡kladnÃ­ jednotka v kaÅ¾dÃ© skupinÄ›

// Pro kaÅ¾dou skupinu jednotek (napÅ™. "hmotnost") zvolÃ­Å¡ jednu zÃ¡kladnÃ­ jednotku (napÅ™. gramy).

// VÅ¡echny ostatnÃ­ jednotky ve skupinÄ› budeÅ¡ pÅ™evÃ¡dÄ›t na tuto zÃ¡kladnÃ­ jednotku pomocÃ­ koeficientu (napÅ™. 1 kg = 1000 g).

// TakÅ¾e kdyÅ¾ mÃ¡Å¡ recept s bramborami v kusech, musÃ­Å¡ mÃ­t moÅ¾nost vÄ›dÄ›t, Å¾e 1 kus bramboru = kolik gramÅ¯.

// PÅ™evod kusÅ¯ na hmotnost

// Tohle je klÃ­ÄovÃ© a zÃ¡roveÅˆ nejvÄ›tÅ¡Ã­ vÃ½zva. Kusy nejsou univerzÃ¡lnÃ­ â€“ 1 brambor mÅ¯Å¾e vÃ¡Å¾it rÅ¯znÄ›.

// MusÃ­Å¡ mÃ­t data o prÅ¯mÄ›rnÃ© hmotnosti jednÃ© "kuse" danÃ© ingredience (napÅ™. jedna brambora vÃ¡Å¾Ã­ 150 g).

// MÅ¯Å¾eÅ¡ mÃ­t tabulku napÅ™. IngredientUnitConversion kterÃ¡ spojuje ingredienci s jednotkou kusÅ¯ a udÃ¡vÃ¡ konverznÃ­ faktor (prÅ¯mÄ›rnou vÃ¡hu kusu).

// Tabulky v databÃ¡zi, kterÃ© ti pomohou:

// Unit â€” jednotky s konverznÃ­mi faktory k zÃ¡kladnÃ­ jednotce ve skupinÄ›

// Ingredient â€” suroviny, napÅ™Ã­klad brambory

// IngredientUnitConversion â€” pro konkrÃ©tnÃ­ ingredienci konverze kusÅ¯ na hmotnost (nebo jinÃ© specifickÃ© jednotky)

// pÅ™Ã­padnÄ› i IngredientGroup (pro seskupovÃ¡nÃ­ podobnÃ½ch ingrediencÃ­)

// VÃ½poÄet v plÃ¡novaÄi:

// KdyÅ¾ chceÅ¡ agregovat nebo pÅ™epoÄÃ­tat ingredience z rÅ¯znÃ½ch receptÅ¯, pÅ™evedeÅ¡ vÅ¡echno na zÃ¡kladnÃ­ jednotku (napÅ™. gramy).

// U kusÅ¯ pouÅ¾ijeÅ¡ konverznÃ­ faktor z tabulky IngredientUnitConversion.

// Tak mÅ¯Å¾eÅ¡ sÄÃ­tat a plÃ¡novat i kdyÅ¾ byly pÅ¯vodnÃ­ jednotky rÅ¯znÃ©.

// ZjednoduÅ¡enÃ­ a doporuÄenÃ­:
// Bez tÄ›chto konverzÃ­ mezi kusy a hmotnostÃ­ bude plÃ¡novaÄ nepÅ™esnÃ½ nebo sloÅ¾itÃ½.

// Data o prÅ¯mÄ›rnÃ© vÃ¡ze kusÅ¯ mÅ¯Å¾eÅ¡ zadÃ¡vat pÅ™i sprÃ¡vÄ› ingrediencÃ­ v administraci.

// Pokud nÄ›kdo zadÃ¡ v receptu "brambory 2 kusy", plÃ¡novaÄ pÅ™epoÄÃ­tÃ¡ na gramy (2 Ã— prÅ¯mÄ›rnÃ¡ hmotnost kusu) a spojÃ­ to s jinÃ½m receptem, kde jsou brambory zadÃ¡ny v gramech.

// ShrnutÃ­:

// Ano, tabulky pro jednotky a skupiny jsou zÃ¡klad, ale je potÅ™eba takÃ© mÃ­t konverznÃ­ faktory specifickÃ© pro danÃ© ingredience (kusy â†’ hmotnost).

// Bez toho se jednotky jen tÄ›Å¾ko sprÃ¡vnÄ› sjednotÃ­ v plÃ¡novaÄi.

// Pokud chceÅ¡, mÅ¯Å¾u ti navrhnout konkrÃ©tnÃ­ modely tabulek pro tento scÃ©nÃ¡Å™.

// Å˜ekl/a jsi:
// Ano
// ChatGPT Å™ekl:
// DobÅ™e, tady je pÅ™Ã­klad, jak bys mohl v Prisma (nebo obecnÄ› v databÃ¡zi) strukturovat tabulky, aby Å¡lo Å™eÅ¡it pÅ™evody jednotek i kusÅ¯ na hmotnost (nebo jinou zÃ¡kladnÃ­ jednotku):

// prisma
// ZkopÃ­rovat
// Upravit
// model UnitGroup {
//   id          Int      @id @default(autoincrement())
//   name        String   @unique          // napÅ™. "Hmotnost", "Objem", "Kusy"
//   baseUnitId  Int?                 
//   baseUnit    Unit?    @relation(fields: [baseUnitId], references: [id])

//   units       Unit[]
// }

// model Unit {
//   id          Int      @id @default(autoincrement())
//   name        String   @unique          // napÅ™. "g", "kg", "ks"
//   displayName String               // napÅ™. "gramy", "kilogramy", "kusy"
//   groupId     Int
//   group       UnitGroup @relation(fields: [groupId], references: [id])
//   toBaseRatio Float     // napÅ™. 1 pro g, 1000 pro kg, u kusÅ¯ 1 (ale bude pouÅ¾it konverznÃ­ faktor u ingredience)

//   ingredientConversions IngredientUnitConversion[]
// }

// model Ingredient {
//   id          Int      @id @default(autoincrement())
//   name        String   @unique
//   // dalÅ¡Ã­ vlastnosti suroviny

//   unitConversions IngredientUnitConversion[]
// }

// model IngredientUnitConversion {
//   id            Int      @id @default(autoincrement())
//   ingredientId  Int
//   ingredient    Ingredient @relation(fields: [ingredientId], references: [id])
//   unitId        Int
//   unit          Unit       @relation(fields: [unitId], references: [id])
//   conversionToBase Float    // napÅ™. prÅ¯mÄ›rnÃ¡ hmotnost jednoho kusu v zÃ¡kladnÃ­ jednotce danÃ© skupiny
//                               // napÅ™. u bramboru: pokud unit = "ks" a zÃ¡kladnÃ­ jednotka je g, mÅ¯Å¾e bÃ½t 150

//   @@unique([ingredientId, unitId])
// }
// Jak to funguje:
// UnitGroup je skupina jednotek, tÅ™eba â€Hmotnostâ€œ (zÃ¡kladnÃ­ jednotka g), â€Objemâ€œ (zÃ¡kladnÃ­ jednotka ml) nebo â€Kusyâ€œ (zÃ¡kladnÃ­ jednotka kus).

// Unit je konkrÃ©tnÃ­ jednotka, kterÃ¡ patÅ™Ã­ do skupiny a mÃ¡ pÅ™evodnÃ­ koeficient vÅ¯Äi zÃ¡kladnÃ­ jednotce (napÅ™. kg = 1000 g).

// IngredientUnitConversion ti umoÅ¾nÃ­ pro konkrÃ©tnÃ­ ingredienci (napÅ™. brambor) definovat, kolik vÃ¡Å¾Ã­ jeden kus v zÃ¡kladnÃ­ jednotce (napÅ™. 1 kus bramboru = 150 g).

// Pro jednotky, kterÃ© nejsou kusy (napÅ™. g, kg), mÅ¯Å¾e bÃ½t conversionToBase rovno 1 (nebo to ignorujeÅ¡ a pouÅ¾Ã­vÃ¡Å¡ toBaseRatio z jednotky).

// Pro kusy je dÅ¯leÅ¾itÃ½ prÃ¡vÄ› ten conversionToBase na Ãºrovni ingredience.

// V aplikaci:
// PÅ™i plÃ¡novÃ¡nÃ­ pÅ™evedeÅ¡ vÅ¡echna mnoÅ¾stvÃ­ na zÃ¡kladnÃ­ jednotku skupiny.

// Pokud je ingredience zadÃ¡na v kusech, pouÅ¾ijeÅ¡ IngredientUnitConversion.conversionToBase Ã— poÄet kusÅ¯.

// Pokud je v jinÃ© jednotce, pouÅ¾ijeÅ¡ Unit.toBaseRatio.

// Pokud chceÅ¡, mÅ¯Å¾u ti pomoci s dalÅ¡Ã­ implementacÃ­, tÅ™eba s vÃ½poÄtem v kÃ³du nebo nÃ¡vrhem admin rozhranÃ­ pro zadÃ¡vÃ¡nÃ­ tÄ›chto konverzÃ­.

// Å˜ekl/a jsi:
// Ano
// ChatGPT Å™ekl:
// SkvÄ›le, tady je postup, jak to mÅ¯Å¾eÅ¡ v praxi implementovat:

// 1) Admin rozhranÃ­ pro zadÃ¡vÃ¡nÃ­ konverzÃ­
// U ingredience zobrazÃ­Å¡ seznam jednotek dostupnÃ½ch v jejÃ­ skupinÄ› (napÅ™. kusy, gramy, kilogramy).

// U kaÅ¾dÃ© jednotky umoÅ¾nÃ­Å¡ zadat konverznÃ­ faktor k zÃ¡kladnÃ­ jednotce skupiny (napÅ™. u kusÅ¯ bramboru: â€1 kus = 150 gâ€œ).

// Pro jednotky typu â€hmotnostâ€œ jako g nebo kg pouÅ¾ijeÅ¡ pÅ™evod z Unit.toBaseRatio (nastavenÃ½ v adminu jen jednou).

// 2) VÃ½poÄet v plÃ¡novaÄi (pseudo kÃ³d)
// ts
// ZkopÃ­rovat
// Upravit
// function convertToBaseUnit(
//   ingredientId: number,
//   amount: number,
//   unitId: number
// ): number {
//   // naÄti jednotku a jejÃ­ skupinu
//   const unit = getUnitById(unitId);
//   const ingredientConversion = getIngredientUnitConversion(ingredientId, unitId);

//   if (unit.group.name === "Kusy" && ingredientConversion) {
//     // pokud je to kusovÃ¡ jednotka, pouÅ¾ij pÅ™epoÄet podle ingredience
//     return amount * ingredientConversion.conversionToBase;
//   } else {
//     // jinak pouÅ¾ij pÅ™evod z jednotky k zÃ¡kladnÃ­ (napÅ™. kg -> g)
//     return amount * unit.toBaseRatio;
//   }
// }
// 3) PÅ™i zadÃ¡vÃ¡nÃ­ receptu i pÅ™i vÃ½poÄtu tÃ½dennÃ­ho plÃ¡nu
// VÅ¡echny mnoÅ¾stvÃ­ pÅ™evedeÅ¡ na zÃ¡kladnÃ­ jednotku danÃ© skupiny (napÅ™. hmotnost v gramech).

// Pak mÅ¯Å¾eÅ¡ vÅ¡echny ingredience snadno sÄÃ­tat, porovnÃ¡vat a agregovat.

// 4) Tipy:
// UdÄ›lej validace v adminu, aby mÄ›l kaÅ¾dÃ¡ ingredience pro kusy definovanÃ½ pÅ™evod, pokud chceÅ¡ kusy pouÅ¾Ã­vat.

// ZvaÅ¾ defaultnÃ­ hodnoty, pokud pÅ™evod nenÃ­ definovanÃ½, tÅ™eba zobraz varovÃ¡nÃ­.

// PÅ™i uklÃ¡dÃ¡nÃ­ receptu se mÅ¯Å¾e pÅ™evod udÄ›lat hned, nebo aÅ¾ pÅ™i plÃ¡novÃ¡nÃ­.

// Pokud chceÅ¡, mohu ti pomoci i s konkrÃ©tnÃ­ ukÃ¡zkou kÃ³du (v Prisma, TypeScriptu nebo Reactu). StaÄÃ­ Å™Ã­ct!

// Å˜ekl/a jsi:
// Ano
// ChatGPT Å™ekl:
// ParÃ¡da! Tady je konkrÃ©tnÃ­ pÅ™Ã­klad, jak to mÅ¯Å¾eÅ¡ udÄ›lat v back-endu (Prisma + TypeScript) a v jednoduchÃ© funkci pro pÅ™evod jednotek u ingredience:

// 1) Modely v Prisma (pÅ™ipomenutÃ­)
// prisma
// ZkopÃ­rovat
// Upravit
// model UnitGroup {
//   id          Int     @id @default(autoincrement())
//   name        String  @unique
//   baseUnitId  Int
//   baseUnit    Unit    @relation(fields: [baseUnitId], references: [id])

//   units       Unit[]
// }

// model Unit {
//   id          Int       @id @default(autoincrement())
//   name        String    @unique
//   displayName String
//   groupId     Int?
//   group       UnitGroup? @relation(fields: [groupId], references: [id])
//   toBaseRatio Float     // pomÄ›r k baseUnit, napÅ™. 0.001 pro gram pokud base je kilogram

//   ingredientConversions IngredientUnitConversion[]
// }

// model Ingredient {
//   id   Int    @id @default(autoincrement())
//   name String

//   unitConversions IngredientUnitConversion[]
// }

// model IngredientUnitConversion {
//   id              Int       @id @default(autoincrement())
//   ingredientId    Int
//   unitId          Int
//   conversionToBase Float     // napÅ™. kolik gramÅ¯ je 1 kus tÃ©to ingredience

//   ingredient      Ingredient @relation(fields: [ingredientId], references: [id])
//   unit            Unit       @relation(fields: [unitId], references: [id])

//   @@unique([ingredientId, unitId])
// }
// 2) Funkce pro pÅ™evod mnoÅ¾stvÃ­ na zÃ¡kladnÃ­ jednotku skupiny
// ts
// ZkopÃ­rovat
// Upravit
// async function convertToBaseUnit(
//   ingredientId: number,
//   amount: number,
//   unitId: number,
//   prisma: PrismaClient
// ): Promise<number> {
//   // NaÄti jednotku + skupinu + pÅ™evod pro ingredienci
//   const unit = await prisma.unit.findUnique({
//     where: { id: unitId },
//     include: { group: true }
//   });
//   if (!unit) throw new Error("Unit not found");

//   const ingredientConversion = await prisma.ingredientUnitConversion.findUnique({
//     where: {
//       ingredientId_unitId: {
//         ingredientId,
//         unitId,
//       }
//     }
//   });

//   if (unit.group) {
//     // Pokud existuje skupina, zkontroluj jestli je u ingredience definovÃ¡n pÅ™evod
//     if (ingredientConversion) {
//       // PouÅ¾ij pÅ™evod na zÃ¡kladnÃ­ jednotku skupiny
//       return amount * ingredientConversion.conversionToBase;
//     } else {
//       // Pokud nenÃ­ definovanÃ½ pÅ™evod na ingredienci, pouÅ¾ij pomÄ›r z jednotky k base unit
//       return amount * unit.toBaseRatio;
//     }
//   } else {
//     // Jednotka nenÃ­ ve skupinÄ›, vraÅ¥ pÅ¯vodnÃ­ mnoÅ¾stvÃ­
//     return amount;
//   }
// }
// 3) Jak to pouÅ¾Ã­t pÅ™i plÃ¡novÃ¡nÃ­
// PÅ™i naÄÃ­tÃ¡nÃ­ receptu a plÃ¡novÃ¡nÃ­ si pro kaÅ¾dou ingredienci zavolÃ¡Å¡ convertToBaseUnit() a zÃ­skÃ¡Å¡ mnoÅ¾stvÃ­ v jednotkÃ¡ch zÃ¡kladnÃ­ skupiny (napÅ™. gramy).

// Pak mÅ¯Å¾eÅ¡ sÄÃ­tat, agregovat nebo pÅ™epoÄÃ­tÃ¡vat podle potÅ™eby.

// Kdybys chtÄ›l, mÅ¯Å¾u ti pomoct i s nÃ¡vrhem UI pro sprÃ¡vu tÄ›ch pÅ™evodÅ¯ v administraci. StaÄÃ­ Å™Ã­ct!

// Å˜ekl/a jsi:
// Ano

// ChatGPT Å™ekl:
// SkvÄ›le! Tady je nÃ¡vod a pÃ¡r tipÅ¯, jak udÄ›lat uÅ¾ivatelsky pÅ™Ã­vÄ›tivou administraci pro sprÃ¡vu tÄ›ch jednotek, skupin a pÅ™evodÅ¯:

// 1) ZÃ¡kladnÃ­ koncept UI pro sprÃ¡vu jednotek a skupin
// a) SprÃ¡va skupin jednotek (Unit Groups)
// Seznam skupin: Zobrazit vÅ¡echny skupiny (napÅ™. â€Hmotnostâ€œ, â€Objemâ€œ, â€PoÄetâ€œ).

// PÅ™idat / upravit skupinu: JmÃ©no skupiny, vÃ½bÄ›r zÃ¡kladnÃ­ jednotky (base unit) z existujÃ­cÃ­ch jednotek.

// b) SprÃ¡va jednotek v rÃ¡mci skupiny
// V detailu skupiny zobrazit tabulku vÅ¡ech jednotek, kterÃ© do nÃ­ patÅ™Ã­.

// Pro kaÅ¾dou jednotku zadat:

// NÃ¡zev (napÅ™. â€gâ€œ, â€kgâ€œ)

// ZobrazovanÃ½ nÃ¡zev (â€gramyâ€œ, â€kilogramyâ€œ)

// PomÄ›r k zÃ¡kladnÃ­ jednotce (napÅ™. pro â€gâ€œ je to 0.001 pokud je baseUnit â€kgâ€œ)

// c) SprÃ¡va pÅ™evodÅ¯ pro ingredience
// Ve sprÃ¡vÄ› ingredience mÃ­t zÃ¡loÅ¾ku â€PÅ™evody jednotekâ€œ

// Vypsat tabulku jednotek, kde pro kaÅ¾dou jednotku lze zadat â€konverzi na zÃ¡kladnÃ­ jednotkuâ€œ (napÅ™. 1 kus = 150 gramÅ¯ brambory)

// MÅ¯Å¾eÅ¡ umoÅ¾nit i â€vÃ½chozÃ­ jednotkuâ€œ ingredience (pro rychlejÅ¡Ã­ zadÃ¡vÃ¡nÃ­)

// 2) NÃ¡vrh komponent a workflow
// scss
// ZkopÃ­rovat
// Upravit
// AdminDashboard
//  â”œâ”€â”€ UnitGroupsList      (pÅ™ehled skupin jednotek)
//  â”‚     â””â”€â”€ UnitGroupForm (editace / pÅ™idÃ¡nÃ­ skupiny, vÄetnÄ› base unit)
//  â”‚     â””â”€â”€ UnitsList     (jednotky v danÃ© skupinÄ›)
//  â”‚           â””â”€â”€ UnitForm (editace / pÅ™idÃ¡nÃ­ jednotky, pomÄ›r k base unit)
//  â””â”€â”€ IngredientsList
//        â””â”€â”€ IngredientForm
//              â””â”€â”€ UnitConversionsTab (pÅ™evody jednotek pro danou ingredienci)
// 3) UÅ¾ivatelskÃ© tipy
// PouÅ¾ij select / dropdown pro volbu zÃ¡kladnÃ­ jednotky a skupiny.

// PÅ™idej validace, aby napÅ™Ã­klad:

// Jednotky mÄ›ly unikÃ¡tnÃ­ nÃ¡zev.

// PomÄ›r k zÃ¡kladnÃ­ jednotce byl vÅ¾dy kladnÃ© ÄÃ­slo.

// V pÅ™evodech pro ingredience umoÅ¾ni uloÅ¾it i prÃ¡zdnÃ© hodnoty (kdyÅ¾ pÅ™evod neznÃ¡Å¡), ale poÄÃ­tej s tÃ­m v aplikaci.

// ZvaÅ¾ pÅ™idÃ¡nÃ­ tooltipÅ¯ nebo help textÅ¯, aby uÅ¾ivatelÃ© vÄ›dÄ›li, proÄ pÅ™evody zadÃ¡vajÃ­.

// ChceÅ¡, abych ti pomohl i s konkrÃ©tnÃ­m kÃ³dem tÅ™eba v Reactu/Next.js pro jednu z tÄ›ch komponent?
// Nebo s nÃ¡vrhem API (endpointÅ¯) pro CRUD operace?

// MÃ¡m si nÄ›jak upravit tabulku pro jednotky, kdyÅ¾ chci mÃ­t moÅ¾nost zadat napÅ™Ã­klad strÅ¾ek, strouÅ¾kÅ¯ a abych vÄ›dÄ›l, Å¾e jednotky patÅ™Ã­ k sobÄ›? Do budoucna chci udÄ›lat tÃ½dennÃ­ plÃ¡noavaÄ a kdyÅ¾ budu vÄ›dÄ›t, Å¾e tuto jednotky patÅ™Ã­ k sobÄ›, tak to mÅ¯Å¾u pÅ™evÄ›st na jednu spoleÄnou jednotku. ALe zase musÃ­m vÄ›dÄ›t, kdy pak urÄitpou jednotku pouÅ¾Ã­t. MusÃ­m vÄ›dÄ›t, pro jakÃ½ poÄet urÄitou jednotku pouÅ¾Ã­t

// model Unit {
//     IdUnit      Int    @id @default(autoincrement()) @db.Integer
//     Name        String @unique @db.VarChar(10) // napÅ™. "g"
//     DisplayName String @db.VarChar(10) // napÅ™. "gramy"

//     Recipes RecipeIngredient[]
// }

// ChatGPT Å™ekl:
// Ano, pokud plÃ¡nujeÅ¡ funkce jako pÅ™evody mezi jednotkami, plÃ¡novÃ¡nÃ­ jÃ­del na tÃ½den, Å¡kÃ¡lovÃ¡nÃ­ receptÅ¯ atd., bude potÅ™eba tvÅ¯j model Unit upravit. MÃ­t jen Name a DisplayName nestaÄÃ­, pokud chceÅ¡:

// vÄ›dÄ›t, kterÃ© jednotky spolu souvisÃ­ (napÅ™. strouÅ¾ek vs. strouÅ¾kÅ¯),

// provÃ¡dÄ›t pÅ™evody mezi nimi (napÅ™. 3 strouÅ¾ky = 15 g),

// automaticky zvolit sprÃ¡vnou jednotku podle mnoÅ¾stvÃ­ (napÅ™. â€1 strouÅ¾ekâ€œ vs. â€3 strouÅ¾kyâ€œ vs. â€15 gâ€œ).

// ğŸ”§ DoporuÄenÃ¡ Ãºprava modelu Unit
// Zde je nÃ¡vrh rozÅ¡Ã­Å™enÃ©ho modelu:

// prisma
// ZkopÃ­rovat
// Upravit
// model Unit {
//   IdUnit        Int       @id @default(autoincrement())
//   Name          String    @unique              // napÅ™. "g"
//   DisplayName   String                         // napÅ™. "gramy"
//   Group         String?                        // napÅ™. "Äesnek", "hmotnost", "objem"
//   IsBase        Boolean   @default(false)      // napÅ™. true pro "g" ve skupinÄ› hmotnosti
//   ConversionToBase Float?                      // napÅ™. 5 pro "strouÅ¾ek" => 1 strouÅ¾ek = 5g

//   Recipes       RecipeIngredient[]
// }
// ğŸ§  Jak to funguje
// Group: UrÄuje, kterÃ© jednotky spolu souvisejÃ­. NapÅ™. "Äesnek" mÅ¯Å¾e mÃ­t "strouÅ¾ek" a "g".

// IsBase: OznaÄÃ­Å¡ jednu jednotku jako zÃ¡kladnÃ­ v rÃ¡mci skupiny (napÅ™. â€gâ€œ pro hmotnost, â€mlâ€œ pro objem).

// ConversionToBase: ÄŒÃ­selnÃ½ pÅ™evod na zÃ¡kladnÃ­ jednotku, pokud je to moÅ¾nÃ© (napÅ™. 1 strouÅ¾ek = 5g).

// âœ… PÅ™Ã­klad:
// Name	DisplayName	Group	IsBase	ConversionToBase
// g	gramy	hmotnost	true	null
// kg	kilogramy	hmotnost	false	1000
// strouÅ¾ek	strouÅ¾kÅ¯	Äesnek	false	5
// ml	mililitry	objem	true	null

// ğŸ—“ï¸ VÃ½hody pro tÃ½dennÃ­ plÃ¡novaÄ:
// MÅ¯Å¾eÅ¡ poÄÃ­tat celkovÃ© mnoÅ¾stvÃ­ surovin ve spoleÄnÃ© jednotce.

// PÅ™i vÃ½pisu nÃ¡kupnÃ­ho seznamu mÅ¯Å¾eÅ¡ automaticky pÅ™evÃ¡dÄ›t napÅ™. 15 strouÅ¾kÅ¯ Äesneku na 75 g.

// MÅ¯Å¾eÅ¡ rozhodovat, kdy zobrazit "strouÅ¾ky" a kdy "g" podle mnoÅ¾stvÃ­ â€“ napÅ™. pokud je pod 4, pouÅ¾ijeÅ¡ strouÅ¾ky, jinak g.

// ğŸ§© MoÅ¾nÃ© rozÅ¡Ã­Å™enÃ­ do budoucna:
// Pokud chceÅ¡ bÃ½t extrÃ©mnÄ› pÅ™esnÃ½, mÅ¯Å¾eÅ¡ mÃ­t i zvlÃ¡Å¡tnÃ­ tabulku UnitConversion, kterÃ¡ definuje pÅ™evody mezi jednotkami nejen ÄÃ­selnÄ›, ale i kontextovÄ› (napÅ™. typ suroviny).

// ChceÅ¡, abych ti pÅ™idal i typ UnitGroup jako samostatnÃ½ model? Nebo ti staÄÃ­ Group: String jako vÃ½Å¡e?

// Å˜ekl/a jsi:
// Nebylo by vhodnÃ© mÃ¡t group ve zlÃ¡Å¡tnÃ­ tabulce a nÄ›jakou pÅ™evodnÃ­ tabulkou to spojit?

// ChatGPT Å™ekl:
// Ano, rozdÄ›lit jednotky do skupin pÅ™es zvlÃ¡Å¡tnÃ­ tabulku a vytvoÅ™it pÅ™evodnÃ­ tabulku je architektonicky ÄistÄ›jÅ¡Ã­, flexibilnÄ›jÅ¡Ã­ a pÅ™ipravenÃ© na budoucÃ­ rÅ¯st.

// ğŸ§± NÃ¡vrh struktury s tabulkami UnitGroup, Unit, a UnitConversion
// ### UnitGroup â€“ napÅ™. â€hmotnostâ€œ, â€objemâ€œ, â€Äesnekâ€œ:
// prisma
// ZkopÃ­rovat
// Upravit
// model UnitGroup {
//   id        Int     @id @default(autoincrement())
//   name      String  @unique    // napÅ™. "hmotnost", "objem", "Äesnek"
//   units     Unit[]
// }
// ### Unit â€“ jednotky jako â€gâ€œ, â€mlâ€œ, â€strouÅ¾ekâ€œ:
// prisma
// ZkopÃ­rovat
// Upravit
// model Unit {
//   id           Int         @id @default(autoincrement())
//   name         String      @unique       // napÅ™. "g", "ml", "strouÅ¾ek"
//   displayName  String                     // napÅ™. "gramy", "mililitry"
//   groupId      Int
//   group        UnitGroup   @relation(fields: [groupId], references: [id])

//   fromConversions UnitConversion[] @relation("FromUnit")
//   toConversions   UnitConversion[] @relation("ToUnit")

//   recipes      RecipeIngredient[]
// }
// ### UnitConversion â€“ pÅ™evody mezi jednotkami ve skupinÄ›:
// prisma
// ZkopÃ­rovat
// Upravit
// model UnitConversion {
//   id         Int    @id @default(autoincrement())
//   fromUnit   Unit   @relation("FromUnit", fields: [fromUnitId], references: [id])
//   fromUnitId Int

//   toUnit     Unit   @relation("ToUnit", fields: [toUnitId], references: [id])
//   toUnitId   Int

//   multiplier Float  // napÅ™. 1 kg = 1000 g => multiplier = 1000
// }
// âœ… VÃ½hody tohoto Å™eÅ¡enÃ­
// VÃ½hoda	VysvÄ›tlenÃ­
// âœ… Flexibilita	MÅ¯Å¾eÅ¡ pÅ™idat libovolnÃ© konverze, napÅ™. 1 strouÅ¾ek Äesneku = 5 g, bez zÃ¡sahu do Unit.
// âœ… ÄŒistÃ¡ data	Jednotky jsou navÃ¡zÃ¡ny na logickÃ© skupiny. VÃ­Å¡, co patÅ™Ã­ k Äemu.
// âœ… NezÃ¡vislost	MÅ¯Å¾eÅ¡ mÃ­t vÃ­c pÅ™evodÅ¯ (napÅ™. pro rÅ¯znÃ© suroviny), napÅ™. 1 hrnek mouky = 120g, ale 1 hrnek rÃ½Å¾e = 200g.
// âœ… MoÅ¾nost rozÅ¡Ã­Å™enÃ­	Do UnitConversion mÅ¯Å¾eÅ¡ pÅ™idat i ingredientId, pokud chceÅ¡ konverze zÃ¡vislÃ© na surovinÄ›.

// ğŸ§  PÅ™Ã­klad zÃ¡znamu v UnitConversion
// fromUnit	toUnit	multiplier
// "kg"	"g"	1000
// "strouÅ¾ek"	"g"	5
// "lÅ¾Ã­ce"	"ml"	15

// â“ChceÅ¡ vÃ­ce: pÅ™idat napÅ™. smÄ›rovost (obousmÄ›rnÃ½ pÅ™evod), poznÃ¡mku, nebo konverzi zÃ¡vislou na surovinÄ›?
// RÃ¡d ti s tÃ­m pomÅ¯Å¾u, jen dej vÄ›dÄ›t, jak detailnÃ­ to chceÅ¡.

// Å˜ekl/a jsi:
// MÅ¯Å¾u mÃ­t tÅ™eba jen skupinu strouÅ¾ek a tam to spojit pod strouÅ¾ek a strouÅ¾ky. Nemo napÅ™iklad skupinu hmotnost a tam mÃ­t g, kg, dkg, atd?

// ChatGPT Å™ekl:
// Ano, pÅ™esnÄ› tak â€“ takovÃ© rozdÄ›lenÃ­ do skupin jako â€strouÅ¾ekâ€œ nebo â€hmotnostâ€œ dÃ¡vÃ¡ smysl a je to sprÃ¡vnÄ›. Zde je vysvÄ›tlenÃ­ obou pÅ™Ã­padÅ¯:

// ğŸ§„ 1. Skupina â€strouÅ¾ekâ€œ (pro neÄÃ­selnÃ© jednotky typu kusÅ¯)
// PouÅ¾Ã­vÃ¡ se napÅ™. pro Äesnek:

// Group: strouÅ¾ek

// Jednotky:

// strouÅ¾ek

// strouÅ¾ky

// ks

// pÅ™Ã­padnÄ› hlaviÄka, pokud chceÅ¡ i tuto granularitu

// ProÄ to dÃ¡vÃ¡ smysl?

// MÅ¯Å¾eÅ¡ si nastavit pÅ™evody (napÅ™. 1 hlaviÄka = 10 strouÅ¾kÅ¯).

// MÅ¯Å¾eÅ¡ sjednotit vÃ½poÄty pro nÃ¡kupnÃ­ seznamy nebo tÃ½dennÃ­ plÃ¡novaÄ.

// UÅ¾ivatelsky je vÃ½stup ÄitelnÄ›jÅ¡Ã­ (napÅ™. â€3 strouÅ¾kyâ€œ mÃ­sto â€3 ks Äesnekuâ€œ).

// âš–ï¸ 2. Skupina â€hmotnostâ€œ
// Zde budou jednotky jako:

// g

// kg

// dkg

// mg

// VÃ½hody:

// MoÅ¾nost pÅ™esnÃ½ch pÅ™evodÅ¯ pomocÃ­ UnitConversion.

// MÅ¯Å¾eÅ¡ pÅ™evÃ¡dÄ›t napÅ™. 2 kg + 300 g na 2.3 kg nebo 2300 g.

// ğŸ¯ Jak to pak pouÅ¾Ã­t?
// NapÅ™Ã­klad pÅ™i vÃ½poÄtu:

// NajdeÅ¡ vÅ¡echny jednotky ve stejnÃ© skupinÄ› (napÅ™. â€hmotnostâ€œ).

// PomocÃ­ UnitConversion pÅ™evedeÅ¡ vÅ¡e na jednu zÃ¡kladnÃ­ jednotku (napÅ™. g).

// PoÄÃ­tÃ¡Å¡, sÄÃ­tÃ¡Å¡, tÅ™Ã­dÃ­Å¡ podle toho.

// ğŸ’¡ ShrnutÃ­
// PÅ™Ã­klad skupiny	Jednotky ve skupinÄ›	DÃ¡vÃ¡ smysl?
// hmotnost	g, kg, dkg, mg	âœ… Ano
// objem	ml, l, ÄajovÃ¡ lÅ¾iÄka	âœ… Ano
// kusy (Äesnek)	strouÅ¾ek, strouÅ¾ky, ks	âœ… Ano
// jednotky vejce	vejce, ks	âœ… Ano (s konverzÃ­)

// Pokud chceÅ¡, mÅ¯Å¾u ti na zÃ¡kladÄ› toho pÅ™ipravit konkrÃ©tnÃ­ modely nebo ukÃ¡zku seed dat s pÅ™evody.

// Å˜ekl/a jsi:
// Ano, chci

// ChatGPT Å™ekl:
// Unit Group Model

// OdpovÄ›dÄ›t mÃ­sto plochy v chatu
// Super, pÅ™epsal jsem ti modely tak, aby podporovaly skupiny jednotek a pÅ™evody mezi nimi:

// UnitGroup definuje skupiny (napÅ™. hmotnost, kusy, strouÅ¾ky).

// Unit patÅ™Ã­ do skupiny a mÅ¯Å¾e bÃ½t v pÅ™evodnÃ­ relaci.

// UnitConversion definuje pÅ™evod mezi jednotkami pomocÃ­ koeficientu.

// Zachoval jsem vztah s RecipeIngredient.

// Pokud chceÅ¡, mÅ¯Å¾eme doplnit i pravidla pouÅ¾itÃ­ (napÅ™. kdy pouÅ¾Ã­t "strouÅ¾ky" mÃ­sto "strouÅ¾ek") pomocÃ­ dalÅ¡Ã­ho pole, nebo logiky. ChceÅ¡ pÅ™idat i takovÃ© upÅ™esnÄ›nÃ­?

// Prisma schema - modely pro jednotky, skupiny a pÅ™evody

// model UnitGroup {
//   id            Int     @id @default(autoincrement())
//   name          String  @unique @db.VarChar(50) // napÅ™. "hmotnost", "strouÅ¾ek"
//   baseUnitId    Int?    // odkaz na zÃ¡kladnÃ­ jednotku ve skupinÄ› (napÅ™. "g" pro hmotnost)

//   units         Unit[]
//   baseUnit      Unit?   @relation("BaseUnit", fields: [baseUnitId], references: [id])
// }

// model Unit {
//   id            Int     @id @default(autoincrement())
//   name          String  @unique @db.VarChar(10)   // napÅ™. "g"
//   displayName   String  @db.VarChar(20)           // napÅ™. "gramy"
//   groupId       Int

//   group         UnitGroup @relation(fields: [groupId], references: [id])
//   conversionsFrom UnitConversion[] @relation("FromUnit")
//   conversionsTo   UnitConversion[] @relation("ToUnit")

//   recipes       RecipeIngredient[]
// }

// model UnitConversion {
//   id         Int  @id @default(autoincrement())
//   fromUnitId Int
//   toUnitId   Int
//   factor     Float   // PÅ™evodnÃ­ koeficient (napÅ™. 1 kg = 1000 g -> factor = 1000)

//   fromUnit   Unit @relation("FromUnit", fields: [fromUnitId], references: [id])
//   toUnit     Unit @relation("ToUnit", fields: [toUnitId], references: [id])
// }

// model RecipeIngredient {
//   id        Int    @id @default(autoincrement())
//   quantity  Float
//   unitId    Int

//   unit      Unit   @relation(fields: [unitId], references: [id])
// }

// Co kdyÅ¾ nÄ›jakÃ© jednotky nejsou zaÅ™adit do Å¾Ã¡dnÃ© skupiny? NapadajÃ­ mÄ› napÅ™Ã­klad kusy

// ChatGPT Å™ekl:
// SkvÄ›lÃ¡ otÃ¡zka â€“ pÅ™esnÄ› tohle je potÅ™eba dopÅ™edu promyslet. U jednotek jako â€kusâ€œ, â€balenÃ­â€œ, â€plechovkaâ€œ apod. mÅ¯Å¾e bÃ½t skupinovÃ¡ struktura mÃ©nÄ› zÅ™ejmÃ¡. Tady jsou moÅ¾nosti, jak to oÅ¡etÅ™it:

// âœ… Varianta 1: NepovinnÃ¡ skupina (groupId mÅ¯Å¾e bÃ½t null)
// UpravÃ­Å¡ Unit model takto:

// prisma
// ZkopÃ­rovat
// Upravit
// model Unit {
//   id               Int         @id @default(autoincrement())
//   name             String      @unique
//   displayName      String
//   pluralName       String?
//   conversionToBase Float?
//   isBase           Boolean     @default(false)
//   groupId          Int?
//   group            UnitGroup?  @relation(fields: [groupId], references: [id])
// }
// DÃ­ky tomu:

// Jednotka mÅ¯Å¾e, ale nemusÃ­ patÅ™it do skupiny.

// NapÅ™. kus, balenÃ­, krabiÄka budou mÃ­t groupId = null.

// âœ… Varianta 2: SpeciÃ¡lnÃ­ skupina â€Bez skupinyâ€œ
// VytvoÅ™Ã­Å¡ v UnitGroup jednu speciÃ¡lnÃ­ skupinu s nÃ¡zvem napÅ™. "OstatnÃ­" nebo "Bez skupiny".

// VÅ¡echny nezaÅ™aditelnÃ© jednotky dÃ¡Å¡ sem.

// VÃ½hody:

// MÅ¯Å¾eÅ¡ vÅ¡echny jednotky filtrovat/Å™adit dle skupiny, aniÅ¾ bys Å™eÅ¡il null.

// NevÃ½hody:

// Je to trochu umÄ›lÃ© â€“ technicky sice nejsou ve skupinÄ›, ale databÃ¡ze si to bude myslet.

// ğŸ”„ Kdy zvolit kterou?
// KritÃ©rium	groupId: null	Skupina â€OstatnÃ­â€œ
// ChceÅ¡ mÃ­t databÃ¡zovÄ› ÄistÃ½ model	âœ… Ano	âŒ Ne
// ChceÅ¡ jednoduÅ¡Å¡Ã­ dotazy a tÅ™Ã­dÄ›nÃ­	âŒ Ne	âœ… Ano
// MÃ¡Å¡ hodnÄ› nezaÅ™aditelnÃ½ch jednotek	âœ… Ano	âœ… Ano

// âœï¸ DoporuÄenÃ­
// Pokud budeÅ¡ skupiny hodnÄ› pouÅ¾Ã­vat v UI a filtrovat podle nich (napÅ™. vÃ½bÄ›r pÅ™evoditelnÃ© jednotky), doporuÄuji mÃ­t groupId nepovinnÃ© (null) a v UI si jednotky bez skupiny zobrazit pod â€OstatnÃ­â€œ. Tak zÃ­skÃ¡Å¡ flexibilitu i Äitelnost.
